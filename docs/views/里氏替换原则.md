---
title: 里氏替换原则
date: 2020-02-16
categories:
 - Note
tags:
 - 设计模式
---
## 里氏替换原则（Liskov Substitution Principle）

里氏替换原则实际上是告诉我们如何正确的使用继承。

继承中包含这样一层含义：父类中凡是已经实现好的方法，实际上实在设定规范和契约，虽然它不强制要求所有的子类必须遵守这些契约，但是如果这些子类对这些已经实现的方法任意修改，就会对整个继承体系造成破坏。

继承在给程序设计带来遍历的同时，也带来了弊端。比如使用继承会u给程序带来侵入性，程序的移植性降低，增加对象间的耦合性，如果一个类被其它的类所继承，则当这个类需要修改时，必须考虑到所有的子类，并且父类需改后，所有涉及到子类的功能都有可能产生故障。

综上问题，继承要遵守里氏替换原则。

+ 何为里氏替换原则？

如果对每个类型为T1的对象O1，都有类型为T2的对象O2，使得以定义T1定义的所有程序P在所有的对象O1都代换成O2时，程序P的行为没有发生变化，那么类型T2时类型T1的子类型。换句话说，所有引用基类的地方必须能透明地使用器子类的对象。

在使用继承时，遵守里氏替换原则，在子类中尽量不要重写父类的方法

里氏替换原则告诉我们，继承实际上让两个类的耦合性增加了，在适当的情况下，可以通过聚合，组合和依赖来解决问题。

## LSP例子

现在有这样一个例子，有一个基类枪，枪可以射击，有很多种枪，手枪，步枪，一个士兵想买一把枪去杀人。

一个士兵买了一把枪然后开枪，杀人。

```java
public class Main {
	public static void main(String[] args) {
		Soldier s = new Soldier();
		s.killEnemy(new Rifle());
		s.killEnemy(new HandGun());
	}
}
class Soldier {
	public void killEnemy(Gun gun) {
		gun.shoot();
		System.out.println("soldier kill enemy");
	}
}
abstract class Gun {
	abstract public void shoot();
}
class Rifle extends Gun {
	@Override
	public void shoot() {
		System.out.println("rifle shoot");
	}	
}
class HandGun extends Gun {
	@Override
	public void shoot() {
		System.out.println("handgun shoot");
	}
}
```

现在问题来了，玩具枪也是枪的一种，所以现在吧玩具枪也加上。

闹笑话了，玩具枪开枪设计也杀死了敌人，所以很明显现在子类并不能代替父类，所以并不符合里氏原则。

```java
public class Main {
	public static void main(String[] args) {
		Soldier s = new Soldier();
		s.killEnemy(new Rifle());
		s.killEnemy(new HandGun());
		s.killEnemy(new ToyGun());
	}
}
class Soldier {
	public void killEnemy(Gun gun) {
		gun.shoot();
		System.out.println("soldier kill enemy");
	}
}
abstract class Gun {
	abstract public void shoot();
}
class ToyGun extends Gun {
	public void shoot() {
		System.out.println("toygun shoot");
	}
}
class Rifle extends Gun {
	@Override
	public void shoot() {
		System.out.println("rifle shoot");
	}	
}
class HandGun extends Gun {
	@Override
	public void shoot() {
		System.out.println("handgun shoot");
	}
}
```

现在的类图

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="691px" viewBox="-0.5 -0.5 691 481" content="&lt;mxfile host=&quot;Chrome&quot; modified=&quot;2020-02-16T16:14:46.949Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36&quot; etag=&quot;Gc2tgaM-kAhZwshw0TVY&quot; version=&quot;12.7.0&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;KMxC7J5TO2hK7lTB8quv&quot; name=&quot;第 1 页&quot;&gt;7Vpdb9owFP01kboHKtv5oDyW0lJVmla1m9Y+TYGYYNWJs2Ag7NfPjp2EfBRayiiLkCrKvb4+tq+Pj28iDPMqSIaxG02/Mg9TAwEvMcyBgRC0EDLkH/BWynNhOcrhx8TTQYXjkfzB2gm0d048PCsFcsYoJ1HZOWZhiMe85HPjmC3LYRNGy6NGro9rjsexS+ven8TjU70K1C38t5j402xk6PRUS+BmwXols6nrseWay7w2zKuYMa6+BckVpjJ5WV5Uv5tXWvOJxTjkb+kQwm/e3SwYLO5CNHR+jR56w2XHulAwC5fO9YoN5FAB2I/knPlKJ8L5PZcT7Qdu7JPQMC9FqxUl4hPkn2Zf7g5OeMelxNdBYzE9HKu2CQt5Z5busWyCtu6UgYtvvv6fTmHUOIX3opAPoQznYQYkckuq4MI3avBFVd803statm8KqGyK2qbd0r+fOf//6einx1ec1LMvKnbBxKlqXB4qzQgtcMyJUJNLdSAGnEUiTB+PAcUT2YuJqAlNtWFCxJlVedBaCG1t37gBoVJFbzFdYIkq88gDKoPyseWAOHlVImAuPEKxMQswj1ciRHcwTVN10WKda9eykD7oaN90XfaAdrpabv0cu1Ak8UWL0nsEqtdegXogE9HzJCQnIWmbkHRBSUcs+Ok6YoP26sitG3rlMuWkJCclaYeSVEuSY5AS2F4p+c5WJyU5KUkblcQBx1eUoAYlqSQZh96lfI8lrBFl4xeRDM+dTbGnMyPab9K8DoCystSicgarWccJ4U+y13m3Z2n7WdgdcA6QtgdJBiuN1Zpxj2MiciBFSo8r8vG0bjyn2HZmFlCplWGp5WKv9hKusqsiJWwej/EbnhS5OCCYb33nVedJEw9iTF1OFuXZNfFAw90zIuadcw7aZc6ZdoVKalW61/rLuwqQCbcAqVXXgFJa5mv8AFOtY2CqvcZTsJGje+RVlulj4pWDynSAvR15VQU6OK/sY+AVejuxcqGDnyZ0Wf15VIS0KjxyLnYjZLdrn/ecEhYyD8xJZ4/1PQIbS/ysualc20OJX4N4ZNQjctx/VuDvvZzdLUVxy5YlQ1+Eyl2HOFid+fIZDYgntXaX7Ca0y6rSULH3uget2Ls1bfgxw5uuLBbhsH4tlS6wTXdUXlcXN0x+SW24bpprJniwmsk5vivKrDz/wV1rccvZArTz/STM4vcAKrz4VYV5/Rc=&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:481px;"><defs/><g><rect x="263" y="190" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 190px; margin-left: 263px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px"><i style="font-size: 15px">Gun</i></b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="263" y="205" fill="#000000" font-family="Helvetica" font-size="15px">Gun...</text></switch></g><rect x="0" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 0px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">Rifle</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="0" y="395" fill="#000000" font-family="Helvetica" font-size="15px">Rifle...</text></switch></g><rect x="263" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 263px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">HandGun</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="263" y="395" fill="#000000" font-family="Helvetica" font-size="15px">HandGun...</text></switch></g><rect x="530" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">ToyGun</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="530" y="395" fill="#000000" font-family="Helvetica" font-size="15px">ToyGun...</text></switch></g><path d="M 127.04 378 L 253.09 250.06" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 262.22 240.8 L 257.72 254.62 L 248.46 245.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 343 380 L 343 304.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 343 291.12 L 349.5 304.12 L 336.5 304.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 570 380 L 433.22 249.74" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 423.81 240.77 L 437.71 245.03 L 428.74 254.44 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="245" y="0" width="197" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 199px; height: 100px; padding-top: 0px; margin-left: 245px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 199px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">Soldier</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ killEnemy(gun Gun): void</p></div></div></div></foreignObject><text x="245" y="15" fill="#000000" font-family="Helvetica" font-size="15px">Soldier...</text></switch></g><path d="M 343.5 100 L 343.01 187.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 336.58 175.85 L 343.01 188.88 L 349.58 175.92" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 145px; margin-left: 343px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">Use</div></div></div></foreignObject><text x="343" y="149" fill="#000000" font-family="Helvetica" font-size="15px" text-anchor="middle">Use</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

因为玩具枪射击并不能杀人，所以需要将能杀人的枪和不能杀人的玩具枪提升到一个等级。这样就可以了。

```java
public class Main {
	public static void main(String[] args) {
		Soldier s = new Soldier();
		s.killEnemy(new Rifle());
		s.killEnemy(new HandGun());
	}
}
class Soldier {
	public void killEnemy(WeaponGun gun) {
		gun.shoot();
		System.out.println("soldier kill enemy");
	}
}
abstract class Gun {
	
}
abstract class WeaponGun extends Gun{
	public abstract void shoot();
}
class ToyGun extends Gun {
	public void shoot() {
		System.out.println("toygun shoot");
	}
}
class Rifle extends WeaponGun {
	@Override
	public void shoot() {
		System.out.println("rifle shoot");
	}	
}
class HandGun extends WeaponGun {
	@Override
	public void shoot() {
		System.out.println("handgun shoot");
	}
}
```

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="691px" viewBox="-0.5 -0.5 691 481" content="&lt;mxfile host=&quot;Chrome&quot; modified=&quot;2020-02-16T16:25:38.991Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36&quot; etag=&quot;fAkclJ0MchV-URdTc8VV&quot; version=&quot;12.7.0&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;KMxC7J5TO2hK7lTB8quv&quot; name=&quot;第 1 页&quot;&gt;7VrbTuMwEP2aSOxDUe6lj0ChCGm1CHYFPK1C46YWTpxN3Tbdr187di5O0gvZNrSlEiqZ8Xgynh6f8aWKce3Hg8gJx9+xC5Ciq26sGH1F1zVT1xX2p7oLrrkwba7wIugKo1zxBP8CoVSFdgpdMJEMCcaIwFBWDnEQgCGRdE4U4blsNsJIfmvoeKCieBo6qKp9hi4Zi1Ho3Vx/B6A3Tt+s2T3e4jupsRjJZOy4eF5QGTeKcR1hTPiTH18DxJKX5oX3u13SmgUWgYBs0iHQfrj3E78/uw/0gf377bE3mHfMC+5m5qCpGLGi24g6vApZzGQhEmH/mbJAr3wn8mCgGJe01Qxj+qkWPqkB+4JATDoOgp6wG9IIQZQ1j3BAOpPkm2atmsW6pv7pkyf+J1G8lRUwVTwDJ8TBYBqkLXTosGxNdRUPVBeWdeOodrQfCnV9wtRKwsxC2j6Wly0EfOCJuEomFZ0/Z9+44QxTrNeOTZci0mcgIpDO8UuO0T7BITUTiO0jMGK9MLUaoWTGjiCdSTwJgqE0S8i3jg8R47Y7gGaAeWVJJD5iRtm72QtBvHTiahkdUB4F2AckWlAT0cEwDN5FUGjGKPOckDRb6MZFMlKF0hEk6GW+c56gD4IqPkIbvS3SxirOWIqHBAjLOWNDCNd5eYQj2nN3/LEq8qYzp1mathPz4afjqxBJV5V4xNQ+nUcs9Xh55M4JXHl1cmKSE5McB5OUlyT7QCXa8VLJT7w4McmJSY6RSWx1/xYleg2TlJIMAveSnS5R6Q3h4TtNhutMxsAVmaHtt0le+yqX0tTqcgbLWQcxJC+s13m3Zwr5lcod9VzVhdyPU7dMWBSEBxBBmgNGUuK9NB8vReE18W2lYu4qkVJffLjArRyNlb5VmhI8jYZgg50ioRMEkLUnUVWc1OEgAsghcCZHV4cD4e4BQxp3hjnNkjFnWCUo8VGJXsUjtZIjQ1vjiI+64iiBZTbG/0CquQ9ItQo4VVdidIu4SjO9T7iydRkOWq8hrsqOWseVdVi4ynkup7bXLI5WeC5dfq7Fo9UiHs0SjOyLZnjsdq3zni350o2WIWlvcXm/o4uKpufmTxi5kL33C9xZHNWwmOk7JbmbAPiLM49t0VS6UTvuFbuhWTKr1CzYe91WF+zdCjf8moBVFQuHIKhWJal+rSpRS8pNXmDqy019adNaWzLZ+7dkMkrbP63pUty01zjadX06gIv0pqy627Onzybx0336jhNx0NWufD61B5fvVt3le8u7s7RoFc6TNtidScWy1VOoi/3bnVlqeXfW9LTAXuOocemjYv77NG6e/8rPuPkH&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" style="cursor:pointer;max-width:100%;max-height:481px;"><defs/><g><rect x="263" y="190" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 190px; margin-left: 263px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b><i>WeaponGun</i></b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="263" y="205" fill="#000000" font-family="Helvetica" font-size="15px">WeaponGun...</text></switch></g><rect x="0" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 0px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">Rifle</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="0" y="395" fill="#000000" font-family="Helvetica" font-size="15px">Rifle...</text></switch></g><rect x="263" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 263px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">HandGun</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="263" y="395" fill="#000000" font-family="Helvetica" font-size="15px">HandGun...</text></switch></g><rect x="530" y="380" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 380px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">ToyGun</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ shoot(): void</p></div></div></div></foreignObject><text x="530" y="395" fill="#000000" font-family="Helvetica" font-size="15px">ToyGun...</text></switch></g><path d="M 127.04 378 L 253.09 250.06" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 262.22 240.8 L 257.72 254.62 L 248.46 245.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 343 380 L 343 304.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 343 291.12 L 349.5 304.12 L 336.5 304.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 610 380 L 610 304.12" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 610 291.12 L 616.5 304.12 L 603.5 304.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="245" y="0" width="197" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 199px; height: 100px; padding-top: 0px; margin-left: 245px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 199px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">Soldier</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px">+ killEnemy(gun Gun): void</p></div></div></div></foreignObject><text x="245" y="15" fill="#000000" font-family="Helvetica" font-size="15px">Soldier...</text></switch></g><path d="M 343.5 100 L 343.01 187.76" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 336.58 175.85 L 343.01 188.88 L 349.58 175.92" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 145px; margin-left: 343px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">Use</div></div></div></foreignObject><text x="343" y="149" fill="#000000" font-family="Helvetica" font-size="15px" text-anchor="middle">Use</text></switch></g><rect x="530" y="190" width="160" height="100" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 100px; padding-top: 190px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 162px; height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 15px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 4px 0px 0px ; text-align: center ; font-size: 15px"><b style="font-size: 15px">Gun</b></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p><hr style="font-size: 15px" /><p style="margin: 0px 0px 0px 4px ; font-size: 15px"><br style="font-size: 15px" /></p></div></div></div></foreignObject><text x="530" y="205" fill="#000000" font-family="Helvetica" font-size="15px">Gun...</text></switch></g><path d="M 423 240 L 515.88 240" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 528.88 240 L 515.88 246.5 L 515.88 233.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

里氏替换原则一句话，继承尽量不要修改重写方法，子类型要完全能够替换基类型。但是知道今天还是不能够理解，继承不该重写方法还有何用？可能就有点像抽象不应该依赖于细节，基类就相当于细节了，基类一改动就全变了，需要把子类调到更高一层。