---
category: Life
tags: []
title: 犯错就是在成长么
date: 2021-10-31 12:00:00 +0000
permalink: "/posts/202110311.html"

---
一周又过去了，时间过的挺快的，这都已经10月底了，本来计划着这周去故宫逛一逛的，但是北京疫情形势严峻，就作罢了，那就聊聊工作上的事吧。

周一，learder又找我了，说我写的两个SQL已经在慢查里面排头两名了，自己去一分析，还真是，”limit 40000,50“速度很慢，应该是扫描了全表，我的场景是想使用两个索引当作条件，但是mysql的优化器选择的索引，在我看来并不是最优的那一个，导致了运行速度很慢，后来了解到联合索引，这正符合我所使用的场景，加上了之后，速度确实提升了很多。
但这也只是针对结果集比较小的时候，当数量上万的时候，sql仍然会慢，总结有如下几个问题点：

- 1.在建表的时候未使用自增索引，导致在查查全表的时候，不能用自增id减少结果集。

- 2.在该需求中采用了不合适的技术方案，其实这一操作，有更好的方式去实现，并不应该在扫表发现问题后再去做这一件事。

后面临时的解决方式是，增加了联合索引，在现阶段还是能用一下的，等结构优化后，再使用新方式。